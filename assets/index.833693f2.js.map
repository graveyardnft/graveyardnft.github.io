{"version":3,"file":"index.833693f2.js","sources":["../../vite/modulepreload-polyfill","../../vite/preload-helper","../../src/utils.ts","../../../../../../../logo.svg","../../src/components/Menu.vue","../../src/components/Button.vue","../../plugin-vue:export-helper","../../src/App.vue","../../src/components/Homepage.vue","../../src/components/URN.vue","../../src/components/Transaction.vue","../../src/components/Committal.vue","../../src/components/CommitPage.vue","../../src/components/Committed.vue","../../src/components/Crypts.vue","../../src/components/Crypt.vue","../../src/main.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","const scriptRel = 'modulepreload';const seen = {};const base = './';export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps || deps.length === 0) {\n        return baseModule();\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        dep = `${base}${dep}`;\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', rej);\n            });\n        }\n    })).then(() => baseModule());\n}","import { ethers } from 'ethers'\n\nexport const getContract = (address: string, abi: any[]) => new ethers.Contract(\n    address,\n    abi,\n    new ethers.providers.Web3Provider((window as any).ethereum).getSigner()\n)\n\nexport const parseCachedEvent = (event: any[]) => {\n    return {\n        contract: event[0],\n        from: event[1],\n        message: ethers.utils.toUtf8String(event[2]).replace(`\\u0000`, ''),\n        tokenId: event[3],\n        tokenMetadata: { name: '', image: '/logo.svg' },\n        loading: false,\n        loaded: false\n    }\n}\n\nexport const parseEvent = (event: object) => {\n    return {\n        contract: event.args.contractAddress,\n        from: event.args.from,\n        message: ethers.utils.toUtf8String(event.args.data).replace(`\\u0000`, ''),\n        tokenId: parseInt(event.args.tokenId.toString()),\n        tokenMetadata: { name: '', image: '/logo.svg' },\n        loading: false,\n        loaded: false\n    }\n}\n\nexport const loadTokenURI = async (rawTokenURI: string) => {\n    const tokenURI = `${rawTokenURI}`.replace('ipfs://', 'https://dweb.link/ipfs/')\n    // try three different request paths to cover as many cases as possible,\n    // but remember some of these are 100% rugs so we can't guarantee either will work\n    // first attempt uri, then try with no cors, finally try a different ipfs gateway\n    try {\n        const res = await fetch(\n            tokenURI,\n            {\n                mode: 'no-cors',\n                redirect: 'follow',\n                referrerPolicy: 'no-referrer',\n                headers: {\n                    Accept: 'application/json'\n                },\n                cache: 'force-cache'\n            }\n        )\n        // burned mice fix\n        const text = await res.text()\n        return JSON.parse(text.replace('}{', '},{'))\n    } catch (e) {\n        try {\n            return await ethers.utils.fetchJson(tokenURI)\n        } catch (e) {\n            if (rawTokenURI.includes('/ipfs/')) {\n                return await ethers.utils.fetchJson(`https://cloudflare-ipfs.com/ipfs/${rawTokenURI.split('/ipfs/')[1]}`)\n            } else {\n                throw e\n            }\n        }\n    }\n}\n","export default \"./logo.svg\"","<template>\n  <menu class=\"p-8 flex flex-col md:flex-row items-center content-center text-white\">\n    <a href=\"/\" @click.prevent=\"router.push({ name: 'home' })\" class=\"font-semibold text-4xl flex items-center\">\n      <img src=\"/logo.svg\" class=\"w-12 h-12 mr-4\" />\n      Graveyard NFT\n    </a>\n    <div class=\"flex items-center justify-center py-4 md:py-0\">\n      <a href=\"#\" @click.prevent=\"router.push({ name: 'crypts' })\" class=\"md:ml-8\">$CRYPT</a>\n      <a href=\"#\" @click.prevent=\"router.push({ name: 'urn' })\" class=\"ml-8\">$URN</a>\n      <a href=\"#\" @click.prevent=\"router.push({ name: 'last-rites' })\" class=\"ml-8\">Whitepaper</a>\n    </div>\n    <div class=\"md:ml-auto flex items-center justify-center mt-4 md:mt-0\">\n      <a href=\"https://twitter.com/Graveyard_NFT_\" target=\"_blank\" rel=\"noopener\" title=\"Twitter\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" class=\"w-6 h-6 fill-current hover:fill-blue-400\">\n          <path d=\"M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z\" />\n        </svg>\n      </a>\n      <a href=\"https://discord.gg/3f4kubD533\" target=\"_blank\" rel=\"noopener\" title=\"Discord\" class=\"ml-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 71 55\" class=\"w-6 h-6 fill-current hover:fill-indigo-500\">\n          <path d=\"M60.1045 4.8978C55.5792 2.8214 50.7265 1.2916 45.6527 0.41542C45.5603 0.39851 45.468 0.440769 45.4204 0.525289C44.7963 1.6353 44.105 3.0834 43.6209 4.2216C38.1637 3.4046 32.7345 3.4046 27.3892 4.2216C26.905 3.0581 26.1886 1.6353 25.5617 0.525289C25.5141 0.443589 25.4218 0.40133 25.3294 0.41542C20.2584 1.2888 15.4057 2.8186 10.8776 4.8978C10.8384 4.9147 10.8048 4.9429 10.7825 4.9795C1.57795 18.7309 -0.943561 32.1443 0.293408 45.3914C0.299005 45.4562 0.335386 45.5182 0.385761 45.5576C6.45866 50.0174 12.3413 52.7249 18.1147 54.5195C18.2071 54.5477 18.305 54.5139 18.3638 54.4378C19.7295 52.5728 20.9469 50.6063 21.9907 48.5383C22.0523 48.4172 21.9935 48.2735 21.8676 48.2256C19.9366 47.4931 18.0979 46.6 16.3292 45.5858C16.1893 45.5041 16.1781 45.304 16.3068 45.2082C16.679 44.9293 17.0513 44.6391 17.4067 44.3461C17.471 44.2926 17.5606 44.2813 17.6362 44.3151C29.2558 49.6202 41.8354 49.6202 53.3179 44.3151C53.3935 44.2785 53.4831 44.2898 53.5502 44.3433C53.9057 44.6363 54.2779 44.9293 54.6529 45.2082C54.7816 45.304 54.7732 45.5041 54.6333 45.5858C52.8646 46.6197 51.0259 47.4931 49.0921 48.2228C48.9662 48.2707 48.9102 48.4172 48.9718 48.5383C50.038 50.6034 51.2554 52.5699 52.5959 54.435C52.6519 54.5139 52.7526 54.5477 52.845 54.5195C58.6464 52.7249 64.529 50.0174 70.6019 45.5576C70.6551 45.5182 70.6887 45.459 70.6943 45.3942C72.1747 30.0791 68.2147 16.7757 60.1968 4.9823C60.1772 4.9429 60.1437 4.9147 60.1045 4.8978ZM23.7259 37.3253C20.2276 37.3253 17.3451 34.1136 17.3451 30.1693C17.3451 26.225 20.1717 23.0133 23.7259 23.0133C27.308 23.0133 30.1626 26.2532 30.1066 30.1693C30.1066 34.1136 27.28 37.3253 23.7259 37.3253ZM47.3178 37.3253C43.8196 37.3253 40.9371 34.1136 40.9371 30.1693C40.9371 26.225 43.7636 23.0133 47.3178 23.0133C50.9 23.0133 53.7545 26.2532 53.6986 30.1693C53.6986 34.1136 50.9 37.3253 47.3178 37.3253Z\" />\n        </svg>\n      </a>\n      <a v-if=\"openSea !== ''\" :href=\"openSea\" title=\"OpenSea\" target=\"_blank\" class=\"ml-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 90 90\" class=\"w-6 h-6 fill-current hover:fill-blue-400\">\n          <path d=\"M45 0C20.151 0 0 20.151 0 45C0 69.849 20.151 90 45 90C69.849 90 90 69.849 90 45C90 20.151 69.858 0 45 0ZM22.203 46.512L22.392 46.206L34.101 27.891C34.272 27.63 34.677 27.657 34.803 27.945C36.756 32.328 38.448 37.782 37.656 41.175C37.323 42.57 36.396 44.46 35.352 46.206C35.217 46.458 35.073 46.71 34.911 46.953C34.839 47.061 34.713 47.124 34.578 47.124H22.545C22.221 47.124 22.032 46.773 22.203 46.512ZM74.376 52.812C74.376 52.983 74.277 53.127 74.133 53.19C73.224 53.577 70.119 55.008 68.832 56.799C65.538 61.38 63.027 67.932 57.402 67.932H33.948C25.632 67.932 18.9 61.173 18.9 52.83V52.56C18.9 52.344 19.08 52.164 19.305 52.164H32.373C32.634 52.164 32.823 52.398 32.805 52.659C32.706 53.505 32.868 54.378 33.273 55.17C34.047 56.745 35.658 57.726 37.395 57.726H43.866V52.677H37.467C37.143 52.677 36.945 52.299 37.134 52.029C37.206 51.921 37.278 51.813 37.368 51.687C37.971 50.823 38.835 49.491 39.699 47.97C40.284 46.944 40.851 45.846 41.31 44.748C41.4 44.55 41.472 44.343 41.553 44.145C41.679 43.794 41.805 43.461 41.895 43.137C41.985 42.858 42.066 42.57 42.138 42.3C42.354 41.364 42.444 40.374 42.444 39.348C42.444 38.943 42.426 38.52 42.39 38.124C42.372 37.683 42.318 37.242 42.264 36.801C42.228 36.414 42.156 36.027 42.084 35.631C41.985 35.046 41.859 34.461 41.715 33.876L41.661 33.651C41.553 33.246 41.454 32.868 41.328 32.463C40.959 31.203 40.545 29.97 40.095 28.818C39.933 28.359 39.753 27.918 39.564 27.486C39.294 26.82 39.015 26.217 38.763 25.65C38.628 25.389 38.52 25.155 38.412 24.912C38.286 24.642 38.16 24.372 38.025 24.111C37.935 23.913 37.827 23.724 37.755 23.544L36.963 22.086C36.855 21.888 37.035 21.645 37.251 21.708L42.201 23.049H42.219C42.228 23.049 42.228 23.049 42.237 23.049L42.885 23.238L43.605 23.436L43.866 23.508V20.574C43.866 19.152 45 18 46.413 18C47.115 18 47.754 18.288 48.204 18.756C48.663 19.224 48.951 19.863 48.951 20.574V24.939L49.482 25.083C49.518 25.101 49.563 25.119 49.599 25.146C49.725 25.236 49.914 25.38 50.148 25.56C50.337 25.704 50.535 25.884 50.769 26.073C51.246 26.46 51.822 26.955 52.443 27.522C52.605 27.666 52.767 27.81 52.92 27.963C53.721 28.71 54.621 29.583 55.485 30.555C55.728 30.834 55.962 31.104 56.205 31.401C56.439 31.698 56.7 31.986 56.916 32.274C57.213 32.661 57.519 33.066 57.798 33.489C57.924 33.687 58.077 33.894 58.194 34.092C58.554 34.623 58.86 35.172 59.157 35.721C59.283 35.973 59.409 36.252 59.517 36.522C59.85 37.26 60.111 38.007 60.273 38.763C60.327 38.925 60.363 39.096 60.381 39.258V39.294C60.435 39.51 60.453 39.744 60.471 39.987C60.543 40.752 60.507 41.526 60.345 42.3C60.273 42.624 60.183 42.93 60.075 43.263C59.958 43.578 59.85 43.902 59.706 44.217C59.427 44.856 59.103 45.504 58.716 46.098C58.59 46.323 58.437 46.557 58.293 46.782C58.131 47.016 57.96 47.241 57.816 47.457C57.609 47.736 57.393 48.024 57.168 48.285C56.97 48.555 56.772 48.825 56.547 49.068C56.241 49.437 55.944 49.779 55.629 50.112C55.449 50.328 55.251 50.553 55.044 50.751C54.846 50.976 54.639 51.174 54.459 51.354C54.144 51.669 53.892 51.903 53.676 52.11L53.163 52.569C53.091 52.641 52.992 52.677 52.893 52.677H48.951V57.726H53.91C55.017 57.726 56.07 57.339 56.925 56.61C57.213 56.358 58.482 55.26 59.985 53.604C60.039 53.541 60.102 53.505 60.174 53.487L73.863 49.527C74.124 49.455 74.376 49.644 74.376 49.914V52.812V52.812Z\" />\n        </svg>\n      </a>\n      <a v-if=\"looksRare !== ''\" :href=\"looksRare\" title=\"Looks Rare\" target=\"_blank\" class=\"ml-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 148 148\" class=\"w-6 h-6 fill-current hover:fill-green-500\">\n          <path d=\"M74 86C61.3026 86 51 75.7077 51 63C51 50.2923 61.3026 40 74 40C86.6974 40 97 50.2923 97 63C97 75.7077 86.6974 86 74 86ZM64 63C64 68.5251 68.4794 73 74 73C79.5206 73 84 68.5251 84 63C84 57.4749 79.5206 53 74 53C68.4794 53 64 57.4749 64 63Z\" fill=\"white\"/>\n          <path d=\"M0 63.0304L44 19H104L148 63.0304L74 137L0 63.0304ZM108 46.9998C89.3047 28.2224 58.6953 28.2225 40 46.9999L24 63.0001L40 79.0002C58.6953 97.7776 89.3047 97.7775 108 79.0001L124 63.0001L108 46.9998Z\"/>\n        </svg>\n      </a>\n      <a :href=\"etherscanUrl\" title=\"Etherscan\" target=\"_blank\" class=\"ml-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 293.775 293.667\" class=\"w-6 h-6 fill-current hover:fill-blue-100\">\n          <g transform=\"translate(-219.378 -213.333)\">\n            <path d=\"M280.433,353.152A12.45,12.45,0,0,1,292.941,340.7l20.737.068a12.467,12.467,0,0,1,12.467,12.467v78.414c2.336-.692,5.332-1.43,8.614-2.2a10.389,10.389,0,0,0,8.009-10.11V322.073a12.469,12.469,0,0,1,12.467-12.47h20.779a12.47,12.47,0,0,1,12.467,12.47v90.276s5.2-2.106,10.269-4.245a10.408,10.408,0,0,0,6.353-9.577V290.9a12.466,12.466,0,0,1,12.465-12.467h20.779A12.468,12.468,0,0,1,450.815,290.9v88.625c18.014-13.055,36.271-28.758,50.759-47.639a20.926,20.926,0,0,0,3.185-19.537,146.6,146.6,0,0,0-136.644-99.006c-81.439-1.094-148.744,65.385-148.736,146.834a146.371,146.371,0,0,0,19.5,73.45,18.56,18.56,0,0,0,17.707,9.173c3.931-.346,8.825-.835,14.643-1.518a10.383,10.383,0,0,0,9.209-10.306V353.152\" transform=\"translate(0 0)\" />\n            <path d=\"M244.417,398.641A146.808,146.808,0,0,0,477.589,279.9c0-3.381-.157-6.724-.383-10.049-53.642,80-152.686,117.405-232.79,128.793\" transform=\"translate(35.564 80.269)\" />\n          </g>\n        </svg>\n      </a>\n    </div>\n  </menu>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, inject } from 'vue'\nimport { useRouter } from 'vue-router'\n\nconst router = useRouter()\n\nconst isRinkeby = inject<boolean>('isRinkeby')\nconst contractAddress = inject<string>('contractAddress')\nconst etherscan = inject<string>('etherscanUrl')\n\nconst openSea = inject<string>('openSea')\nconst looksRare = inject<string>('looksRare')\nconst etherscanUrl = computed<string>(() => `${etherscan.value}/address/${contractAddress.value}`)\n</script>\n","<template>\n  <a\n      class=\"flex-inline flex-shrink-0 cursor-pointer rounded-lg shadow-xl shadow-black/50 border border-sky-900 border-t-sky-500 border-r-sky-500 bg-sky-700 text-slate-800 font-bold hover:bg-sky-800\"\n      :class=\"{\n        'pt-2 pb-1 px-3 md:pt-3 md:pb-2 md:px-5 text-xl md:text-2xl': !attrs.size || attrs.size === 'large',\n        'p-1 md:p-2 text-sm': attrs.size && attrs.size === 'small'\n      }\"\n      @click.prevent=\"click\"\n  >\n    <slot />\n  </a>\n</template>\n\n<script setup lang=\"ts\">\nimport { useAttrs } from 'vue'\n\nconst emits = defineEmits({\n  click: null\n})\n\nconst attrs = useAttrs()\n\nconst click = () => {\n  if (attrs.href) window.location.href = attrs.href;\n  emits('click')\n}\n</script>\n","\nexport default (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n}\n","<template>\n  <template v-if=\"isWeb3\">\n    <div v-if=\"!isMainNet\" class=\"sticky top-0 p-2 text-center text-sm text-gray-900 bg-yellow-300\">\n      <code>{{ isRinkeby ? `Ethereum Testnet: ${network.name}` : `Unsupported Network: ${network.name} chainId:${network.chainId}` }}</code>\n    </div>\n    <Menu />\n    <div class=\"top-0\">\n      <div v-if=\"$route.meta.web3 && (!isConnected)\" class=\"container mx-auto flex-col py-32 text-center\">\n        <h1 class=\"text-5xl leading-snug\">The Graveyard NFT project is the final resting place for your unsuccessful NFTs on the Ethereum blockchain.</h1>\n        <h2 class=\"text-md\">Join our discord to stay up to date on news and announcements.</h2>\n        <div class=\"flex items-center justify-center my-8\">\n          <Button class=\"mx-2\" @click=\"connect()\">Connect</button>\n          <Button class=\"mx-2\" @click=\"router.push({ name: 'last-rites' })\">Whitepaper</Button>\n        </div>\n      </div>\n      <router-view v-else />\n      <div v-if=\"ipfs.hash\" class=\"container mx-auto mt-10 py-10 text-center text-xs border-t border-t-gray-300\">\n        <p>This dApp is also deployed using IPFS decentralised storage and can be found at:</p>\n        <a :href=\"`https://${ipfs.domain}.link`\" target=\"_blank\" rel=\"noopener\" class=\"hover:text-gray-900 px-4\">https://{{ ipfs.domain }}.link</a>\n        <a :href=\"`ipfs://${ipfs.base32}`\" target=\"_blank\" rel=\"noopener\" class=\"hover:text-gray-900 px-4\">ipfs://{{ ipfs.base32 }}</a>\n      </div>\n      <div v-if=\"error\" class=\"fixed bottom-0 w-full\">\n        <div class=\"w-5/6 mx-auto pb-12 flex justify-center\">\n          <div class=\"max-w-full px-5 py-4 flex items-center justify-center bg-red-500 text-sm text-white rounded-md\">\n            <div class=\"break-all\"><strong>Error:</strong> <code class=\"max-w-xs overflow-x-scroll text-xs\">{{ error }}</code></div>\n            <svg viewBox=\"0 0 24 24\" class=\"flex flex-shrink-0 fill-white w-4 h-4 ml-2 cursor-pointer\" @click=\"clearError\">\n              <path d=\"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\" />\n            </svg>\n          </div>\n        </div>\n      </div>\n      <div v-if=\"success\" class=\"fixed bottom-0 w-full\">\n        <div class=\"w-5/6 mx-auto pb-12 flex justify-center\">\n          <div class=\"max-w-full px-5 py-4 flex items-center justify-center bg-green-500 text-sm text-white rounded-md\">\n            <div class=\"break-all\"><code class=\"max-w-xs overflow-x-scroll text-xs\">{{ success }}</code></div>\n            <svg viewBox=\"0 0 24 24\" class=\"flex flex-shrink-0 fill-white w-4 h-4 ml-2 cursor-pointer\" @click=\"clearSuccess\">\n              <path d=\"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\" />\n            </svg>\n          </div>\n        </div>\n      </div>\n    </div>\n  </template>\n  <template v-else>\n    <Menu />\n    <router-view v-if=\"!$route.meta.web3\" />\n    <div v-else class=\"container mx-auto flex-col py-32 text-center\">\n      <h1 class=\"text-5xl leading-snug\">The Graveyard NFT project is the final resting place for your unsuccessful NFTs on the Ethereum blockchain.</h1>\n      <h2 class=\"text-md\">Join our discord to stay up to date on news and announcements.</h2>\n      <h1 class=\"text-3xl my-8\">Use a web3 connected browser to access The Graveyard NFT Project</h1>\n      <div class=\"flex items-center justify-center my-8\">\n        <Button class=\"mx-2\" @click=\"router.push({ name: 'last-rites' })\">Last Rites</Button>\n      </div>\n    </div>\n  </template>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, ref, computed, provide, onErrorCaptured, watchEffect } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ethers } from 'ethers'\nimport { CID } from 'multiformats/cid'\nimport { getContract, parseEvent, parseCachedEvent } from './utils'\nimport graveyardAbi from './graveyardAbi.json'\nimport cryptAbi from './cryptAbi.json'\nimport urnAbi from './urnAbi.json'\nimport Menu from './components/Menu.vue'\nimport Button from './components/Button.vue'\n\nexport default defineComponent({\n  components: { Menu, Button },\n  props: {\n    provider: {\n      type: ethers.providers.Web3Provider\n    },\n    graveyardAddresses: {\n      type: Object,\n      required: true\n    },\n    cryptAddresses: {\n      type: Object,\n      required: true\n    },\n    urnAddresses: {\n      type: Object,\n      required: true\n    },\n    ensDomain: {\n      type: String,\n      required: true\n    },\n    openSea: {\n      type: String,\n      required: true\n    },\n    looksRare: {\n      type: String,\n      required: true\n    }\n  },\n  setup(props) {\n    const provider = props.provider;\n    const error = ref<string|null>(null)\n    const success = ref<string|null>(null)\n\n    const web3 = computed(() => provider?.provider)\n    const network = ref<{ chainId: number, name: string }>({ chainId: 1, name: '' })\n    const ipfs = ref<{ cid: string, base32: string, domain: string, hash: string }>({ cid: '', base32: '', domain: props.ensDomain, hash: '' })\n    const accounts = ref<string[]>([])\n    const account = computed<string|null>(() => accounts.value[0])\n    const shortAccount = computed<string|null>(() => {\n      const address = `${account.value}`\n      return address ? `${address.substring(0, 5)}...${address.substring(address.length - 5)}` : null\n    })\n    const ensName = ref<string|null>(null)\n    const isMainNet = computed<boolean>(() => network.value?.chainId === 1)\n    const isRinkeby = computed<boolean>(() => network.value?.chainId === 4)\n    const isConnected = computed<boolean>(() => !!account.value && (isMainNet.value || isRinkeby.value))\n    const etherscanUrl = computed(() => `https://${isRinkeby.value ? 'rinkeby.' : ''}etherscan.io`)\n    const graveyardAddress = computed<string>(() => props.graveyardAddresses[isConnected.value ? network.value.chainId : 1])\n    const graveyard = computed<ethers.Contract|null>(() => isConnected.value && props.graveyardAddresses[network.value.chainId] ? getContract(props.graveyardAddresses[network.value.chainId], graveyardAbi) : null)\n    const cryptAddress = computed<string>(() => props.cryptAddresses[isConnected.value ? network.value.chainId : 1])\n    const crypt = computed<ethers.Contract|null>(() => isConnected.value && props.cryptAddresses[network.value.chainId] ? getContract(props.cryptAddresses[network.value.chainId], cryptAbi) : null)\n    const urnAddress = computed<string>(() => props.urnAddresses[isConnected.value ? network.value.chainId : 1])\n    const urn = computed<ethers.Contract|null>(() => isConnected.value && props.urnAddresses[network.value.chainId] ? getContract(props.urnAddresses[network.value.chainId], urnAbi) : null)\n    const maxSupply = ref(6969)\n    const stage = ref(0)\n    const minted = ref(0)\n    const committed = ref<object[]>([])\n\n    let timeout: number\n    provide('success', (msg: string) => {\n      success.value = msg\n      if (timeout) clearTimeout(timeout)\n      timeout = window.setTimeout(() => (success.value = null), 5000)\n    })\n    provide('openSea', props.openSea)\n    provide('looksRare', props.looksRare)\n    provide('provider', provider)\n    provide('web3', web3)\n    provide('network', network)\n    provide('ipfs', ipfs)\n    provide('accounts', accounts)\n    provide('account', account)\n    provide('shortAccount', shortAccount)\n    provide('ensName', ensName)\n    provide('isConnected', isConnected)\n    provide('isMainNet', isMainNet)\n    provide('isRinkeby', isRinkeby)\n    provide('etherscanUrl', etherscanUrl)\n    provide('contract', graveyard)\n    provide('contractAddress', graveyardAddress)\n    provide('crypt', crypt)\n    provide('cryptAddress', cryptAddress)\n    provide('urn', urn)\n    provide('urnAddress', urnAddress)\n    provide('maxSupply', maxSupply)\n    provide('stage', stage)\n    provide('minted', minted)\n    provide('committed', committed)\n\n    const connect = () => provider?.provider?.request({ method: 'eth_requestAccounts' }).then(updateAccounts)\n\n    const updateAccounts = async (newAccounts: string[]) => {\n      if (newAccounts[0] === accounts.value[0]) return\n      accounts.value = newAccounts\n      console.debug('accounts', accounts.value)\n      if (account.value && network.value?.chainId === 1) {\n        ensName.value = await provider.lookupAddress(account.value)\n        console.debug('ens name', ensName.value)\n      }\n    }\n\n    const updateMinted = async () => {\n      minted.value = (await crypt.value.totalSupply()).toNumber()\n      maxSupply.value = (await crypt.value.maxSupply()).toNumber()\n      console.debug('minted', minted.value, 'max', maxSupply.value)\n    }\n\n    const updateStage = async () => {\n      stage.value = (await graveyard.value.releaseStage()).toNumber()\n      console.debug('stage', stage.value)\n    }\n\n    const updateIpfs = async () => {\n      if (network.value?.chainId === 1) {\n        const resolver = await provider.getResolver(ipfs.value.domain)\n        const hash = await resolver.getContentHash()\n        if (hash) {\n          ipfs.value.hash = hash\n          const cid = CID.parse(hash.replace(/ip[fn]s:\\/\\//, ''))\n          ipfs.value.cid = cid.toV0().toString()\n          ipfs.value.base32 = cid.toV1().toString()\n        }\n      }\n      console.debug('ipfs', ipfs.value)\n    }\n\n    const updateCommitted = async () => {\n      const cached = await import('./eventCache.json')\n      const filter = graveyard.value.filters.Committed()\n      committed.value = [\n        ...(await graveyard.value.queryFilter(filter, cached.blockNumber + 1)).reverse().map(parseEvent),\n        ...cached.events.reverse().map(parseCachedEvent)\n      ]\n      graveyard.value.on(filter, event => {\n        committed.value.unshift(parseEvent(event))\n      })\n    }\n\n    if (provider) {\n      provider.getNetwork().then(net => {\n        network.value = net\n        console.debug('network', network.value)\n        provider.provider.request({ method: 'eth_accounts' }).then(updateAccounts)\n      })\n\n      provider.provider.on('accountsChanged', updateAccounts)\n      provider.provider.on('chainChanged', () => window.location.reload())\n    }\n\n    const handler = (err: Error) => {\n      console.error(err)\n      error.value = err?.error ? err.error.message.replace('execution reverted: ', '') : err.message\n      setTimeout(() => (error.value = null), 5000)\n      return false\n    }\n\n    onErrorCaptured(handler)\n    window.addEventListener('unhandledrejection', event => {\n      event.preventDefault();\n      handler(new Error(event.reason))\n    })\n\n    // Reactive stage, and minted total for use in components\n    watchEffect(async () => {\n      if (isConnected.value && graveyard.value) {\n        updateIpfs()\n        updateStage()\n        updateCommitted()\n        graveyard.value.on(graveyard.value.filters.ReleaseStage(), updateStage)\n        if (crypt.value) {\n          updateMinted()\n          crypt.value.on(crypt.value.filters.Transfer(ethers.constants.AddressZero), updateMinted)\n        }\n      }\n    })\n\n    return {\n      isWeb3: !!provider,\n      isMainNet,\n      isRinkeby,\n      network,\n      ipfs,\n      isConnected,\n      connect,\n      graveyard,\n      ensName,\n      shortAccount,\n      account,\n      maxSupply,\n      minted,\n      stage,\n      success,\n      error,\n      clearError: () => (error.value =  null),\n      clearSuccess: () => (success.value = null),\n      router: useRouter()\n    }\n  }\n})\n</script>\n\n<style>\nbody {\n  background: url('./assets/bg.svg');\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  background-position: center;\n  background-size: cover;\n}\n</style>\n","<template>\n  <div class=\"container mx-auto flex-col pt-6 pb-32 md:pt-32 px-4 md:px-0 text-center\">\n    <h1 class=\"text-3xl md:text-5xl leading-snug mb-4\">The Graveyard NFT project is the final resting place for your unsuccessful NFTs on the Ethereum blockchain.</h1>\n    <h2 class=\"text-xl mb-3\">Tokens committed to the graveyard: {{ committed.length }}</h2>\n    <div class=\"flex flex-col items-center justify-center my-6\">\n      <Button v-if=\"urnAddress\" class=\"m-2\" @click=\"addUrn\">Add URN Token</Button>\n      <Button class=\"m-2\" @click=\"router.push({ name: 'committed' })\">View Graveyard</Button>\n      <Button class=\"m-2\" @click=\"router.push({ name: 'commit' })\">Sacrifice</Button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, inject } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ethers } from 'ethers'\nimport { getContract } from '../utils'\nimport Button from './Button.vue'\n\nconst router = useRouter()\n\nconst stage = inject<number>('stage')\nconst minted = inject<number>('minted')\nconst maxSupply = inject<number>('maxSupply')\nconst openSea = inject<string>('openSea')\nconst web3 = inject('web3')\nconst contract = inject<ethers.Contract>('contract')\nconst urn = inject<ethers.Contract>('urn')\nconst urnAddress = inject<string>('urnAddress')\nconst committed = inject<number>('committed')\n\nconst addUrn = async () => {\n  const symbol = await urn.value.symbol()\n  const decimals = await urn.value.decimals()\n  const image = 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMDAxIDEwMDEiPjxjaXJjbGUgY3g9IjUwMC4zIiBjeT0iNTAwLjMiIHI9IjUwMC4zIiBmaWxsPSIjMDA0NjkzIi8+PHBhdGggZmlsbD0iIzAwMmM3MSIgZD0iTTU0NSAyOUMyNjkgMjkgNDUgMjUzIDQ1IDUyOXMxNjMgNDUxIDQ0MCA0NTEgNDk1LTE3NCA0OTUtNDUxUzgyMSAyOSA1NDUgMjlabTAgOTA4YTQwOCA0MDggMCAxIDEgMC04MTYgNDA4IDQwOCAwIDAgMSAwIDgxNloiLz48cGF0aCBmaWxsPSIjMDA2Y2E2IiBkPSJNNTAwIDBhNTAwIDUwMCAwIDEgMCAwIDEwMDFBNTAwIDUwMCAwIDAgMCA1MDAgMFptMCA5MDhhNDA4IDQwOCAwIDEgMSAwLTgxNiA0MDggNDA4IDAgMCAxIDAgODE2WiIvPjxwYXRoIGZpbGw9IiMwYTBiNDgiIGQ9Im00MTIgNzUxIDE3OS00IDI5LTEzIDktMTQ4IDc4LTIyLTMtMTExczItMjEwLTE3OS0yMjItMTEzIDUyMC0xMTMgNTIwWiIvPjxwYXRoIGZpbGw9IiMwMDY2OWMiIGQ9Im01NzEgNzQ3IDYtMTY4IDg1LTE2LTItMTE5cy0xOS0yMTUtMTcyLTIxMi0xNzggMTg0LTE4NCAyOThsNzggNDggMyAxNzQgMjctMSAzLTUzIDIwIDUzIDgyLTIgMTctMTE1IDYgMTE0WiIvPjxwYXRoIGZpbGw9IiMwOTBmNTAiIGQ9Ik00MjIgMzg1cy0yNiAxMi0yNCAxMDhsLTQyIDZzLTIzLTY5LTMtOTcgMjAtNDQgNjktMTdaIi8+PHBhdGggZmlsbD0iIzAwNTI5ZiIgZD0iTTM5OCA0OTNzNTUtNDAgMjQtMTA4YzAgMC0yNiAxMy0yNCAxMDhaIi8+PHBhdGggZmlsbD0iIzBiMDk1NCIgZD0ibTQxNyA1NDUgNTQtMiAzNC01M3MtMTUtNDYtNDUtMTUtNDMgNzAtNDMgNzBaIi8+PHBhdGggZmlsbD0iIzAwNTE5YSIgZD0ibTQ3MSA1NDMgMzUtMXMyNy0zLTEtNTJaIi8+PHBhdGggZmlsbD0iIzAwNGNhNyIgZD0iTTYxMCA0OTNzMTEtNDUtOS0xMTBsLTYxIDM4IDYgMzFaIi8+PHBhdGggZmlsbD0iIzBkMGU0YyIgZD0ibTYxMSA1MDgtMzEgMXMtMjYtNC01OS02NCA1Ni03OSA1Ni03OSA0MCA1IDI0IDE3bC00MCAyN3MtMTIgMjIgMTIgNDVsMzcgMzhaIi8+PHBhdGggZmlsbD0iIzBhMGI0OCIgZD0ibTc2OCA5MjMtNTgtNzMgMTEtMjItMi01OCAzMy0yNFY2MzhsNTItNDAgNTQtNCA0NS0yMyA5NC0yNi0yIDI4LTk0IDE4LTM5IDEyLTE1IDI1LTE4LTQtMzEgMTgtMjcgNSA3IDQ1LTExIDIwLTMgNjAtMjUgMTEtNiAzNyAzIDEyIDMyIDkxeiIvPjxwYXRoIGZpbGw9IiMwOWYiIGQ9Im05OTYgNTY5LTk5IDE5LTM5IDE2LTExIDI0IDE2LTIyIDM0LTE0IDk3LTE0IDItOXpNNTYgMjY5aDEwOGwyOSA1NGg4MGwtNjMtMjctMTYtNjUtMTM4IDM4eiIvPjxwYXRoIGZpbGw9IiMwOTBmNTAiIGQ9Ik02MSAyNjVoMTA4bDI5IDUzIDc1IDUtNTgtMzItMTYtNjUtMTM4IDM5eiIvPjxwYXRoIGZpbGw9IiMwOWYiIGQ9Im04NDIgMTM3IDMxIDI5LTQ5IDE1IDYtMjItNDggMTMgNS0xOCA1NS0xN3oiLz48cGF0aCBmaWxsPSIjMDkwZjUwIiBkPSJtODQwIDEzNCAzMSAzMC01MCAxNCA2LTIyLTQ3IDE0IDUtMTggNTUtMTh6Ii8+PC9zdmc+'\n  const added = await web3.value.request({\n    method: 'wallet_watchAsset',\n    params: {\n      type: 'ERC20',\n      options: {\n        address: urnAddress.value,\n        symbol,\n        decimals,\n        image,\n      },\n    },\n  })\n  console.debug('URN', added, urnAddress, symbol, decimals);\n}\n</script>\n","<template>\n  <div class=\"container mx-auto flex-col pt-6 pb-32 md:pt-32 px-4 md:px-0 text-center\">\n    <h1 class=\"text-xl md:text-3xl leading-snug mb-4\">$URN is a ERC20 token of no fixed supply, yielded by $CRYPT’s and returned for tokens sent to the Graveyard.</h1>\n    <h2 class=\"md:text-xl leading-snug mb-8\">$URN may be used/burnt for future benefits outside of the promised utility of $CRYPT’s either directly by the project or through partnerships.</h2>\n    <h2 class=\"text-xl mb-3\">$URN Supply: ~</h2>\n    <h2 class=\"text-xl mb-3\">Daily $URN reward rate: {{ rewardRate }}</h2>\n    <h2 class=\"text-xl mb-3\">Pending $URN rewards: {{ rewards }}</h2>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { inject, ref } from 'vue'\nimport { ethers } from 'ethers'\n\nconst graveyard = inject('contract')\nconst crypt = inject('crypt')\nconst account = inject('account')\nconst rewards = ref(0)\nconst rewardRate = ref(0)\n\nconst updateRewards = async () => {\n  rewards.value = ethers.utils.formatEther(await graveyard.value.claimable(account.value))\n  rewardRate.value = ethers.utils.formatEther(await crypt.value.getRewardRate(account.value))\n}\n\nupdateRewards()\nsetInterval(() => updateRewards(), 5000)\n</script>\n","<template>\n  <svg v-if=\"!receipt\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" class=\"fill-current w-10 h-10\">\n    <path d=\"M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50\">\n      <animateTransform attributeName=\"transform\" attributeType=\"XML\" type=\"rotate\" dur=\"1s\" from=\"0 50 50\" to=\"360 50 50\" repeatCount=\"indefinite\" />\n    </path>\n  </svg>\n  <span v-if=\"!transaction?.hash\">Waiting for signature</span>\n  <svg v-else-if=\"receipt?.status === 1\" viewBox=\"0 0 24 24\" class=\"fill-green-500 w-8 h-8\">\n    <path d=\"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z\" />\n  </svg>\n  <svg v-else-if=\"receipt?.status === 0\" viewBox=\"0 0 24 24\" class=\"fill-red-500 w-8 h-8\">\n    <path d=\"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z\" />\n  </svg>\n  <a v-if=\"transaction?.hash\" :href=\"`${etherscanUrl}/tx/${transaction?.hash}`\" target=\"_blank\" rel=\"noopener\" class=\"ml-2\">View Transaction</a>\n</template>\n\n<script setup lang=\"ts\">\nimport { inject } from 'vue'\nimport { ethers } from 'ethers'\n\nconst props = defineProps({\n  transaction: {\n    type: ethers.Transaction\n  },\n  receipt: {\n    type: ethers.TransactionReceipt\n  }\n})\n\nconst etherscanUrl = inject<string>('etherscanUrl')\n</script>\n","<template>\n  <div class=\"flex flex-col w-96 max-w-full mx-auto p-8 bg-slate-900/90 rounded border-4 border-slate-900 text-gray-100\">\n    <a href=\"#\" class=\"flex items-center justify-center mb-2 text-sm\" @click.prevent=\"toggleHelp\">\n      <span>Help</span>\n      <svg viewBox=\"0 0 24 24\" class=\"w-4 h-4 ml-1 fill-current\">\n        <path d=\"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z\" />\n      </svg>\n    </a>\n    <input v-model=\"contractAddress\" @blur=\"loadContract\" type=\"text\" class=\"mb-1 p-2 rounded text-2xl bg-transparent text-center placeholder:text-grey-100  outline-none focus:ring ring-slate-600/25\" placeholder=\"Contract Address\" />\n    <span class=\"text-xs mb-2\">Contract address or Marketplace Link to token</span>\n    <span v-if=\"contractAddress !== '' && !isAddress(contractAddress)\" class=\"text-sm text-red\">Not a valid address</span>\n    <span v-else-if=\"tokenName && symbol\" class=\"mb-4\">{{ tokenName }} ({{ symbol }})</span>\n    <template v-if=\"contract && !isEnumerable\">\n      <input v-model=\"tokenId\" @blur=\"loadTokens\" class=\"mb-1 p-2 rounded text-2xl bg-transparent text-center placeholder:text-grey-100  outline-none focus:ring ring-slate-600/25\" placeholder=\"TokenIds\" />\n      <span class=\"text-xs mb-2\">EG: 1,2,3</span>\n    </template>\n    <template v-if=\"tokens.length\">\n      <div class=\"text-sm\">Select NFT's</div>\n      <div class=\"flex flex-wrap items-center justify-center\">\n        <div\n            v-for=\"token in tokens\"\n            :key=\"token.tokenId\"\n            class=\"w-24 p-4 m-1 rounded-lg border-4 border-slate-900 bg-slate-800/90 cursor-pointer\"\n            :class=\"{ 'border-blue-500': token.selected, 'text-gray-900 cursor-not-allowed': token.invalid }\"\n            @click.prevent=\"selectToken(token)\"\n        >\n          {{ token.tokenId }}\n        </div>\n      </div>\n    </template>\n    <div v-if=\"tokens.some(t => t.selected)\" class=\"flex-col\">\n      <div v-for=\"token in tokens.filter(t => t.selected)\" :key=\"token.tokenId\" class=\"p-4 mt-4 rounded-lg border-4 border-slate-900 bg-slate-800/90\">\n        <TokenImage :loading=\"!token.meta\" :src=\"token?.meta?.image || 'logo.svg'\" :greyscale=\"false\" />\n        <span>#{{ token.tokenId }}</span>\n        <input v-model=\"token.data\" type=\"text\" class=\"w-full mt-2 p-2 rounded text-2xl bg-transparent text-center placeholder:text-grey-100  outline-none ring ring-slate-600/25\" placeholder=\"Last Rites\" />\n      </div>\n      <Button v-if=\"!isApproved && tokens.filter(t => t.selected).length > 1\" class=\"block mt-4\" @click=\"approve\">Approve Graveyard</Button>\n      <Button v-else class=\"block mt-4\" @click=\"commit\">Commit Tokens</Button>\n    </div>\n  </div>\n  <Modal v-if=\"helpOpen\" @close=\"toggleHelp\">\n    <template #header>\n      Transferring Token To The Graveyard\n    </template>\n    <div class=\"text-left\">\n      <p class=\"mb-2\">Tokens MUST be ERC721 on the Ethereum Network.</p>\n      <p class=\"mb-2 text-xl\">Contract Address</p>\n      <p class=\"mb-2\">Paste in the NFT contract address or a link to the token on Marketplace and leave the field.</p>\n      <p class=\"mb-2 text-xl\">TokenId's</p>\n      <p class=\"mb-2\">If we can we will load your owned token id's, if not you will be shown a field to enter the tokenId's manually separated by a comma, EG:</p>\n      <pre class=\"mb-2\">1,2,3</pre>\n      <p class=\"mb-2 text-xl\">Last Rites</p>\n      <p>You can optionally commit your token with a final message of committal, say goodbye to your token.</p>\n    </div>\n  </Modal>\n  <Modal v-if=\"approving\" @close=\"reset\">\n    <template #header>\n      Approving The Graveyard To Transfer\n    </template>\n    <p>To bulk transfer tokens the graveyard must be approved to do so.</p>\n    <p>This is a <code>setApproveForAll</code> transaction and ONLY allows the graveyard to transfer tokens from this collection.</p>\n    <div class=\"flex items-center justify-center my-4\">\n      <Transaction :transaction=\"transaction\" :receipt=\"receipt\" />\n    </div>\n  </Modal>\n  <Modal v-if=\"committing\" @close=\"reset\">\n    <template #header>\n      Transferring Token(s) To The Graveyard\n    </template>\n    <p>Say goodbye, they are being transferred to their final resting place.</p>\n    <div class=\"flex items-center justify-center my-4\">\n      <Transaction :transaction=\"transaction\" :receipt=\"receipt\" />\n    </div>\n  </Modal>\n</template>\n\n<script setup lang=\"ts\">\nimport { inject, ref } from 'vue'\nimport { ethers } from 'ethers'\n// @ts-ignore\nimport snap from 'snap-fade-away'\nimport { getContract, loadTokenURI } from '../utils'\nimport Modal from './Modal.vue'\nimport Transaction from './Transaction.vue'\nimport Button from './Button.vue'\nimport TokenImage from './TokenImage.vue'\n\nconst props = defineProps({\n  account: {\n    type: String,\n    required: true\n  },\n  graveyardAddress: {\n    type: String,\n    required: true\n  }\n})\n\nconst account = inject('account')\nconst success = inject<(msg: string) => {}>('success')\nconst graveyard = inject('contract')\n\nconst isAddress = address => ethers.utils.isAddress(address)\nconst helpOpen = ref(false)\nconst loading = ref(false)\nconst contractAddress = ref('')\nconst contract = ref(null)\nconst isEnumerable = ref(false)\nconst isApproved = ref(false)\nconst symbol = ref('')\nconst tokenName = ref('')\nconst tokenId = ref(null)\nconst balance = ref(0)\nconst tokens = ref([])\nconst transaction = ref(null)\nconst receipt = ref(null)\nconst approving = ref(false)\nconst committing = ref(false)\n\nconst toggleHelp = () => {\n  helpOpen.value = !helpOpen.value\n}\n\nconst loadContract = async () => {\n  try {\n    const match = (contractAddress.value || '').match(/(0x[0-9a-fA-F]{40})/)\n    contractAddress.value = match && match.length > 1 ? match[1] : ''\n    loading.value = true\n    tokens.value = []\n    balance.value = 0\n    symbol.value = ''\n    tokenName.value = ''\n    isEnumerable.value = false\n    tokenId.value = ''\n    if (!ethers.utils.isAddress(contractAddress.value)) {\n      contract.value = null\n      loading.value = false\n      return\n    }\n    if (contract.value && contract.value.address === contractAddress.value) return\n\n    const c = getContract(contractAddress.value, [\n      'function symbol() view returns (string)',\n      'function name() view returns (string)',\n      'function tokenURI(uint256 tokenId) view returns (string)',\n      'function ownerOf(uint256 tokenId) view returns (address)',\n      'function balanceOf(address owner) view returns (uint256)',\n      'function tokenOfOwnerByIndex(address owner, uint256 index) view returns (uint256)',\n      'function isApprovedForAll(address owner, address operator) view returns (bool)',\n      'function setApprovalForAll(address operator, bool approved)',\n      'function safeTransferFrom(address from, address to, uint256 tokenId, bytes data)',\n      'event Transfer(address from, address to, uint256 tokenId)'\n    ])\n    try {\n      symbol.value = await c.symbol()\n      tokenName.value = await c.name()\n      isApproved.value = await c.isApprovedForAll(account.value, props.graveyardAddress)\n      contract.value = c\n      balance.value = (await c.balanceOf(account.value)).toNumber()\n      if (balance.value > 0) {\n        // try enumerable if it exists, else user has to enter there own ids\n        try {\n          for (let i = 0;i < balance.value;i++) {\n            const tId = await c.tokenOfOwnerByIndex(account.value, i)\n            tokens.value.push({ selected: false, data: '', tokenId: tId.toNumber() })\n          }\n          isEnumerable.value = true\n        } catch (e) {\n          isEnumerable.value = false\n        }\n      }\n    } catch (e) {}\n  } catch (e) {\n    throw e\n  } finally {\n    loading.value = false\n  }\n}\n\nconst loadTokens = async () => {\n  const tIds = (tokenId.value || '').split(',').map(t => parseInt(t))\n  const t = []\n  for (let i = 0;i < tIds.length;i++) {\n    try {\n      if ((await contract.value.ownerOf(tIds[i])).toLowerCase() === account.value.toLowerCase()) {\n        t.push({ selected: false, data: '', tokenId: tIds[i] })\n      } else {\n        t.push({ selected: false, data: '', tokenId: tIds[i], invalid: true })\n      }\n    } catch (e) {}\n  }\n  tokens.value = t\n}\n\nconst selectToken = token => {\n  if (token.invalid) return\n  token.selected = !token.selected\n  loadNFTs()\n}\n\nconst loadNFTs = () => {\n  tokens.value.forEach(async token => {\n    if (token.uri) return\n    token.uri = await contract.value.tokenURI(token.tokenId)\n    token.meta = await loadTokenURI(token.uri)\n  })\n}\n\nconst reset = () => {\n  committing.value = false\n  approving.value = false\n  transaction.value = null\n  receipt.value = null\n}\n\nconst approve = async () => {\n  if (approving.value) return\n  approving.value = true\n  transaction.value = null\n  receipt.value = null\n  try {\n    transaction.value = await contract.value.setApprovalForAll(props.graveyardAddress, true)\n  } catch (e) {\n    reset()\n    throw e\n  }\n  console.debug('transaction', transaction.value)\n  receipt.value = await transaction.value.wait()\n  console.debug('receipt', receipt.value)\n  if (receipt.value.status !== 1) throw new Error('Transaction Reverted!')\n  success(`${tokenName.value} (${symbol.value}) approved for committal.`)\n  isApproved.value = await contract.value.isApprovedForAll(account.value, props.graveyardAddress)\n  setTimeout(() => {\n    approving.value = false\n  }, 1000)\n}\n\nconst commit = async () => {\n  if (committing.value) return\n  committing.value = true\n  transaction.value = null\n  receipt.value = null\n  try {\n    const selected = tokens.value.filter(t => t.selected)\n    if (selected.length > 1) {\n      transaction.value = await graveyard.value.commitTokens([contractAddress.value], [selected.map(t => t.tokenId)], [selected.map(t => ethers.utils.toUtf8Bytes(t.data))])\n    } else {\n      transaction.value = await contract.value.safeTransferFrom(account.value, props.graveyardAddress, selected[0].tokenId, ethers.utils.toUtf8Bytes(selected[0].data))\n    }\n  } catch (e) {\n    reset()\n    throw e\n  }\n  console.debug('transaction', transaction.value)\n  receipt.value = await transaction.value.wait()\n  console.debug('receipt', receipt.value)\n  if (receipt.value.status !== 1) throw new Error('Transaction Reverted!')\n  const audio = new Audio('win.wav')\n  audio.play()\n  success(`Sacrifice complete.`)\n  reset()\n  tokens.value = []\n  tokenName.value = ''\n  symbol.value = ''\n  contractAddress.value = ''\n  contract.value = null\n  setTimeout(() => {\n    committing.value = false\n  }, 5000)\n}\n</script>\n","<template>\n  <div class=\"container mx-auto pt-6 pb-32 md:pt-32 px-4 md:px-0 text-center\">\n    <h1 class=\"text-3xl md:text-5xl leading-snug mb-4\">Committal</h1>\n    <p class=\"text-lg mb-8\">Committing NFTs to the Graveyard is your last action as the token holder.<br/>Committal transfers ownership to the contract, and they are no longer in your control.<br/>This is not staking, you no longer own the token.</p>\n    <p class=\"text-2xl uppercase mb-8\">Only $CRYPT holders receive $URN for committal</p>\n    <Committal v-if=\"account && contract\" :account=\"account\" :graveyardAddress=\"contract.address\" />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { inject } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { ethers } from 'ethers'\nimport Committal from './Committal.vue'\n\nconst router = useRouter()\n\nconst account = inject<string|null>('account', null)\nconst contract = inject<ethers.Contract>('contract')\nconst stage = inject<number>('stage')\n</script>\n","<template>\n  <div class=\"container mx-auto px-4 md:px-0\">\n    <div class=\"py-7 border-b border-slate-500 flex flex-col md:flex-row items-center\">\n      <input v-model=\"query\" type=\"text\" class=\"mb-4 p-2 rounded border border-slate-900 bg-slate-800 text-sm placeholder:text-grey-100 outline-none\" placeholder=\"Search\" />\n      <a\n          v-if=\"props.token\"\n          href=\"#\"\n          class=\"mb-4 md:ml-4 inline-flex items-center px-2 py-2 bg-slate-800 rounded border border-slate-900 shadow text-sm hover:bg-slate-700\"\n          @click.prevent=\"router.replace({ query: { token: undefined } })\"\n      >\n        Clear Collection Filter\n      </a>\n      <Pagination @prev=\"prevPage\" @next=\"nextPage\">\n        Page {{ page }} of {{ maxPage }} ({{ committed.length }})\n      </Pagination>\n    </div>\n    <div class=\"flex flex-wrap justify-center items-center\">\n      <Token\n          v-for=\"(token, index) in paginated\"\n          :key=\"`${token.tokenId}:${token.contract}`\"\n          :tokenName=\"tokenContracts[token.contract]?.name\"\n          :tokenSymbol=\"tokenContracts[token.contract]?.symbol\"\n          :tokenId=\"token.tokenId\"\n          :metaData=\"token.tokenMetadata\"\n          :loading=\"token.loading\"\n          @click=\"selectToken(token, index)\"\n      />\n    </div>\n    <div class=\"my-4 py-7 border-t border-slate-500 flex items-center\">\n      <Pagination @prev=\"prevPage\" @next=\"nextPage\">\n        Page {{ page }} of {{ maxPage }} ({{ committed.length }})\n      </Pagination>\n    </div>\n    <Modal v-if=\"selectedToken\" full @close=\"selectedToken = null\">\n      <template #header>\n        <div class=\"flex items-center\">\n          <nav class=\"inline-flex bg-slate-800 rounded border border-slate-900 shadow mr-4\" aria-label=\"Pagination\">\n            <a href=\"#\" @click.prevent=\"prevToken\" class=\"inline-flex items-center px-1 py-1 rounded-l-md text-sm hover:bg-slate-700\">\n              <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                <path fill-rule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\" clip-rule=\"evenodd\" />\n              </svg>\n            </a>\n            <a href=\"#\" @click.prevent=\"nextToken\" class=\"inline-flex items-center px-1 py-1 border-l border-slate-900 rounded-r-md text-sm hover:bg-slate-700\">\n              <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                <path fill-rule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clip-rule=\"evenodd\" />\n              </svg>\n            </a>\n          </nav>\n          <span>#{{ selectedToken.tokenId }} {{ tokenContracts[selectedToken.contract]?.name }}<template v-if=\"tokenContracts[selectedToken.contract]?.symbol\"> ({{ tokenContracts[selectedToken.contract]?.symbol }})</template></span>\n        </div>\n      </template>\n      <div class=\"flex flex-col md:flex-row\">\n        <div class=\"w-full lg:w-1/2 md:pr-2\">\n          <TokenImage :src=\"selectedToken.tokenMetadata.image || 'logo.svg'\" :grayscale=\"false\" />\n          <div class=\"text-center\">{{ selectedToken.message }}</div>\n          <div class=\"mt-4 flex items-center justify-center\">\n            <Button size=\"small\" @click=\"router.push({ query: { token: selectedToken.contract } })\">View more from this collection</Button>\n          </div>\n        </div>\n        <div class=\"w-full lg:w-1/2 md:pl-2\">\n          <div class=\"grid grid-cols-3 gap-4\">\n            <span class=\"col-span-3 md:col-span-1 font-bold\">TokenId:</span>\n            <span class=\"col-span-3 md:col-span-2\">{{ selectedToken.tokenId }}</span>\n            <span class=\"col-span-3 md:col-span-1 font-bold\">Name:</span>\n            <span class=\"col-span-3 md:col-span-2\">{{ selectedToken.tokenMetadata?.name || 'FULL RUG!' }}</span>\n            <span class=\"col-span-3 md:col-span-1 font-bold\">Description:</span>\n            <span class=\"col-span-3 md:col-span-2\">{{ selectedToken.tokenMetadata?.description || 'FULL RUG!' }}</span>\n            <span class=\"col-span-3 font-bold\">Attributes</span>\n            <template v-for=\"attribute in selectedToken.tokenMetadata?.attributes\">\n              <span class=\"col-span-3 md:col-span-1 font-bold\">{{ attribute.trait_type }}:</span>\n              <span class=\"col-span-3 md:col-span-2\">{{ attribute.value }}</span>\n            </template>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { inject, ref, computed, watch, watchEffect } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { ethers } from 'ethers'\nimport { debounce } from 'debounce'\nimport { loadTokenURI } from '../utils'\nimport contractCache from '../contractCache.json'\nimport Token from './Token.vue'\nimport Modal from './Modal.vue'\nimport TokenImage from './TokenImage.vue'\nimport Button from './Button.vue'\nimport Pagination from './Pagination.vue'\n\nconst props = defineProps({\n  from: {\n    type: String,\n    default: null\n  },\n  token: {\n    type: String,\n    default: null\n  }\n})\n\nconst route = useRoute()\nconst router = useRouter()\nconst contract = inject<ethers.Contract>('contract')\nconst committed = inject<object[]>('committed')\n\nconst signer = new ethers.providers.Web3Provider((window as any).ethereum).getSigner()\nconst getContract = address => new ethers.Contract(\n    address,\n    [\n      'function symbol() external view returns (string)',\n      'function name() external view returns (string)',\n      'function tokenURI(uint256) external view returns (string)'\n    ],\n    signer\n)\n\nconst tokens = ref<object[]>([])\nconst tokenContracts = ref<Record<string, object>>(\n  Object.fromEntries(\n    Object.entries(contractCache)\n      .map(([address, data]) => ([ address, { symbol: data[0], name: data[1], contract: getContract(address) } ]))\n  )\n)\nconst query = ref<string>('')\nconst selectedToken = ref(null)\nconst selectedTokenIndex = ref(0)\n\nconst page = computed<number>(() => parseInt(route?.query?.page || 1))\nconst filtered = computed<object[]>(() => {\n  const q = query.value\n  if (q === '') return tokens.value\n\n  return tokens.value.filter(token => {\n    const { tokenId, message, contract } = token\n    const { symbol = '', name = '' } = tokenContracts.value[contract] || {}\n    return `${tokenId}`.includes(q) || message.toLowerCase().includes(q) || symbol.toLowerCase().includes(q) || name.toLowerCase().includes(q)\n  })\n})\nconst paginated = computed<object[]>(() => filtered.value.slice((page.value - 1) * 20, page.value * 20))\nconst maxPage = computed<number>(() => Math.ceil((query.value !== '' ? filtered.value.length : tokens.value.length) / 20))\n\nconst prevPage = () => {\n  if (page.value !== 1) {\n    router.replace({ query: { page: page.value - 1} })\n  }\n}\n\nconst nextPage = () => {\n  if (page.value !== maxPage.value) {\n    router.replace({ query: { page: page.value + 1 } })\n  }\n}\n\nconst selectToken = (token, index) => {\n  selectedToken.value = token\n  selectedTokenIndex.value = index\n}\n\nconst prevToken = () => {\n  if (selectedTokenIndex.value > 0) {\n    selectedTokenIndex.value--\n    selectToken(paginated.value[selectedTokenIndex.value], selectedTokenIndex.value)\n  }\n}\n\nconst nextToken = () => {\n  if (selectedTokenIndex.value < paginated.value.length) {\n    selectedTokenIndex.value++\n    selectToken(paginated.value[selectedTokenIndex.value], selectedTokenIndex.value)\n  }\n}\n\nconst loadContract = (event: object) => {\n  if (!tokenContracts.value.hasOwnProperty(event.contract)) {\n    const contract = getContract(event.contract)\n    tokenContracts.value[event.contract] = {\n      contract,\n      symbol: '',\n      name: ''\n    }\n    Promise.all([contract.symbol(), contract.name()]).then(([symbol, name]) => {\n      tokenContracts.value[event.contract].symbol = symbol\n      tokenContracts.value[event.contract].name = name\n    })\n  }\n  return event\n}\n\nconst loadToken = async (event: object) => {\n  if (event.loading || event.loaded) return\n  event.loading = true\n  try {\n    event.tokenMetadata = await loadTokenURI(await tokenContracts.value[event.contract].contract.tokenURI(event.tokenId))\n  } catch (e) {\n    event.tokenMetadata = { failed: true }\n  }\n  event.loading = false\n  event.loaded = true\n}\n\nwatch(() => query.value, () => router.replace({ query: { page: undefined } }))\nwatch(() => paginated.value, debounce(() => {paginated.value.forEach(loadToken); console.log('triggered')}, 128))\n\nwatchEffect(() => {\n  let t = (props.from ? committed.value.filter(e => e.from.toLowerCase() === props.from.toLowerCase()) : committed.value)\n  if (props.token) {\n    t = t.filter(e => e.contract.toLowerCase() === props.token.toLowerCase())\n  }\n  tokens.value = t.map(e => loadContract(e))\n})\n</script>\n\n<style>\n.loading {\n  animation: rotate 1.5s linear infinite;\n}\n@keyframes loading {\n  to{ transform: rotate(360deg); }\n}\n</style>\n","<template>\n  <div class=\"container mx-auto px-4 md:px-0\">\n    <div class=\"mb-4 py-7 border-b border-slate-500 flex items-center\">\n      <input v-model=\"query\" type=\"text\" class=\"p-2 rounded border border-slate-900 bg-slate-800 text-sm placeholder:text-grey-100 outline-none\" placeholder=\"Search\" />\n      <a v-if=\"balance\" href=\"#\" @click.prevent=\"filterMyCrypts\" class=\"inline-flex ml-4 bg-slate-800 rounded border border-slate-900 shadow items-center px-2 py-2 rounded-l-md text-sm hover:bg-slate-700\">\n        {{ myCrypts.length ? 'All CRYPT\\'s' : 'My CRYPT\\'s' }}\n      </a>\n      <Pagination @prev=\"prevPage\" @next=\"nextPage\">\n        Page {{ page }} of {{ maxPage }} ({{ myCrypts.length || minted }})\n      </Pagination>\n    </div>\n    <div class=\"flex flex-wrap justify-center items-center\">\n      <Token\n          v-for=\"(token, index) in paginated\"\n          :key=\"token.tokenId\"\n          tokenName=\"Graveyard CRYPTS\"\n          tokenSymbol=\"CRYPT\"\n          :tokenId=\"token.tokenId\"\n          :metaData=\"token.tokenMetadata\"\n          :loading=\"token.loading\"\n          :grayscale=\"false\"\n          @click=\"selectToken(token, index)\"\n      />\n    </div>\n    <div class=\"my-4 py-7 border-t border-slate-500 flex items-center\">\n      <Pagination @prev=\"prevPage\" @next=\"nextPage\">\n        Page {{ page }} of {{ maxPage }} ({{ myCrypts.length || minted }})\n      </Pagination>\n    </div>\n    <Modal v-if=\"selectedToken\" full @close=\"selectedToken = null\">\n      <template #header>\n        <div class=\"flex items-center\">\n          <nav class=\"inline-flex bg-slate-800 rounded border border-slate-900 shadow mr-4\" aria-label=\"Pagination\">\n            <a href=\"#\" @click.prevent=\"prevToken\" class=\"inline-flex items-center px-1 py-1 rounded-l-md text-sm hover:bg-slate-700\">\n              <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                <path fill-rule=\"evenodd\" d=\"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z\" clip-rule=\"evenodd\" />\n              </svg>\n            </a>\n            <a href=\"#\" @click.prevent=\"nextToken\" class=\"inline-flex items-center px-1 py-1 border-l border-slate-900 rounded-r-md text-sm hover:bg-slate-700\">\n              <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\" fill=\"currentColor\" aria-hidden=\"true\">\n                <path fill-rule=\"evenodd\" d=\"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z\" clip-rule=\"evenodd\" />\n              </svg>\n            </a>\n          </nav>\n          <span>#{{ selectedToken.tokenId }} Graveyard CRYPTS (CRYPT)</span>\n        </div>\n      </template>\n      <div class=\"flex flex-col md:flex-row\">\n        <div class=\"w-full lg:w-1/2 md:pr-2 relative\">\n          <TokenImage :src=\"selectedToken.tokenMetadata.image || 'logo.svg'\" :grayscale=\"false\" />\n          <a\n              href=\"#\"\n              class=\"absolute top-0 right-0 mt-4 mr-5 p-2 rounded-full bg-gray-200 text-slate-700 hover:bg-white hover:text-slate-900\"\n              @click.prevent=\"download(selectedToken.tokenMetadata.image, selectedToken.tokenMetadata?.name)\"\n          >\n            <svg class=\"h-5 w-5\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M17,13L12,18L7,13H10V9H14V13M19.35,10.03C18.67,6.59 15.64,4 12,4C9.11,4 6.6,5.64 5.35,8.03C2.34,8.36 0,10.9 0,14A6,6 0 0,0 6,20H19A5,5 0 0,0 24,15C24,12.36 21.95,10.22 19.35,10.03Z\" />\n            </svg>\n          </a>\n          <div class=\"mt-4 flex items-center justify-center\">\n            <Button size=\"small\" @click=\"router.push({ name: 'crypt', params: { tokenId: selectedToken.tokenId } })\">View $CRYPT</Button>\n          </div>\n        </div>\n        <div class=\"w-full lg:w-1/2 md:pl-2\">\n          <div class=\"grid grid-cols-3 gap-4\">\n            <span class=\"col-span-3 md:col-span-1 font-bold\">TokenId:</span>\n            <span class=\"col-span-3 md:col-span-2\">{{ selectedToken.tokenId }}</span>\n            <span class=\"col-span-3 md:col-span-1 font-bold\">Name:</span>\n            <span class=\"col-span-3 md:col-span-2\">{{ selectedToken.tokenMetadata?.name }}</span>\n            <span class=\"col-span-3 md:col-span-1 font-bold\">Description:</span>\n            <span class=\"col-span-3 md:col-span-2\">{{ selectedToken.tokenMetadata?.description }}</span>\n            <span class=\"col-span-3 font-bold\">Attributes</span>\n            <template v-for=\"attribute in selectedToken.tokenMetadata?.attributes\">\n              <span class=\"col-span-3 md:col-span-1 font-bold\">{{ attribute.trait_type }}:</span>\n              <span class=\"col-span-3 md:col-span-2\">{{ attribute.value }}</span>\n            </template>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed, inject, ref, watch, watchEffect } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { ethers } from 'ethers'\nimport { debounce } from 'debounce'\nimport { loadTokenURI } from '../utils'\nimport Token from './Token.vue'\nimport Button from './Button.vue'\nimport Pagination from './Pagination.vue'\nimport Modal from './Modal.vue'\nimport TokenImage from './TokenImage.vue'\n\nconst route = useRoute()\nconst router = useRouter()\n\nconst stage = inject<number>('stage')\nconst crypt = inject<ethers.Contract>('crypt')\nconst cryptAddress = inject<string>('cryptAddress')\nconst minted = inject<number>('minted')\nconst maxSupply = inject<number>('maxSupply')\nconst account = inject<string>('account')\n\nconst tokens = ref<any[]>([])\nconst balance = ref<number>(0)\nconst myCrypts = ref<number[]>([])\nconst selectedToken = ref(null)\nconst selectedTokenIndex = ref(0)\n\nconst query = ref<string>('')\nconst page = computed<number>(() => parseInt(route?.query?.page || 1))\nconst filtered = computed<object[]>(() => {\n  const t = (myCrypts.value.length) ? tokens.value.filter(token => myCrypts.value.includes(token.tokenId)) : tokens.value\n  const q = query.value\n  if (q === '') return t\n\n  return t.filter(token => `${token.tokenId}`.includes(q))\n})\nconst paginated = computed<object[]>(() => filtered.value.slice((page.value - 1) * 20, page.value * 20))\nconst maxPage = computed<number>(() => Math.ceil((query.value !== '' || myCrypts.value.length ? filtered.value.length : minted.value) / 20))\n\nconst prevPage = () => {\n  if (page.value !== 1) {\n    router.replace({ query: { page: page.value - 1} })\n  }\n}\n\nconst nextPage = () => {\n  if (page.value !== maxPage.value) {\n    router.replace({ query: { page: page.value + 1 } })\n  }\n}\n\nconst loadToken = async (event: object) => {\n  if (event.loading || event.loaded) return\n  event.loading = true\n  try {\n    event.tokenMetadata = await loadTokenURI(await crypt.value.tokenURI(event.tokenId))\n  } catch (e) {\n    event.tokenMetadata = { failed: true }\n  }\n  event.loading = false\n  event.loaded = true\n}\n\nconst filterMyCrypts = async () => {\n  if (myCrypts.value.length) {\n    myCrypts.value = []\n  } else {\n    const tokens = []\n    for (let i = 0; i < balance.value; i++) {\n      tokens.push((await crypt.value.tokenOfOwnerByIndex(account.value, i)).toNumber())\n    }\n    myCrypts.value = tokens\n  }\n}\n\nconst selectToken = (token, index) => {\n  selectedToken.value = token\n  selectedTokenIndex.value = index\n}\n\nconst prevToken = () => {\n  if (selectedTokenIndex.value > 0) {\n    selectedTokenIndex.value--\n    selectToken(paginated.value[selectedTokenIndex.value], selectedTokenIndex.value)\n  }\n}\n\nconst nextToken = () => {\n  if (selectedTokenIndex.value < paginated.value.length) {\n    selectedTokenIndex.value++\n    selectToken(paginated.value[selectedTokenIndex.value], selectedTokenIndex.value)\n  }\n}\n\nconst download = (svg, name) => {\n  let img = document.createElement('img')\n  img.onload = () => {\n    document.body.appendChild(img)\n    const canvas = document.createElement('canvas')\n    const ratio = (img.clientWidth / img.clientHeight) || 1\n    document.body.removeChild(img)\n    canvas.width = 2400\n    canvas.height = 2400 / ratio\n    const ctx = canvas.getContext('2d')\n    ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\n    const data = canvas.toDataURL('image/png')\n    const link = document.createElement('a')\n    link.href = data\n    link.download = `${name.replace(' ', '-')}.png`\n    link.click()\n  }\n  img.src = svg\n}\n\nwatch([() => query.value, () => myCrypts.value], () => router.replace({ query: { page: undefined } }))\nwatch(() => paginated.value, debounce(() => {paginated.value.forEach(loadToken); console.log('triggered')}, 128))\n\nwatchEffect(async () => {\n  balance.value = (await crypt.value.balanceOf(account.value)).toNumber()\n  for (let i = 0; i < minted.value; i++) {\n    if (tokens.value[i] && tokens.value[i].loaded) continue\n    tokens.value[i] = { tokenId: i + 1 }\n  }\n})\n</script>\n","<template>\n  <Committed :from=\"from\" :token=\"props.token\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { inject, ref } from 'vue'\nimport { onBeforeRouteLeave, onBeforeRouteUpdate } from 'vue-router'\nimport { loadTokenURI } from '../utils'\nimport Committed from './Committed.vue'\n\nconst props = defineProps({\n  tokenId: {\n    type: Number,\n    required: true\n  },\n  token: {\n    type: String\n  }\n})\nconst crypt = inject('crypt')\nconst from = ref(null)\n\nPromise.all([crypt.value.ownerOf(props.tokenId), crypt.value.tokenURI(props.tokenId)])\n  .then(async ([address, tokenURI]) => {\n    from.value = address\n    const uri = await loadTokenURI(tokenURI)\n    document.body.style.backgroundImage = `url(${uri.image})`\n  })\n\nonBeforeRouteUpdate(async to => {\n  from.value = await crypt.value.ownerOf(to.params.tokenId)\n  const tokenURI = await crypt.value.tokenURI(to.params.tokenId)\n  const uri = await loadTokenURI(tokenURI)\n  document.body.style.backgroundImage = `url(${uri.image})`\n})\n\nonBeforeRouteLeave(async to => {\n  document.body.style.backgroundImage = ''\n})\n</script>\n","import { createApp, h } from 'vue'\nimport { createRouter, createWebHashHistory } from 'vue-router'\nimport { ethers } from 'ethers'\nimport '@fontsource/medievalsharp'\n\nimport './index.css'\nimport App from './App.vue'\nimport Homepage from './components/Homepage.vue'\nimport LastRites from './components/LastRites.vue'\nimport URN from './components/URN.vue'\nimport CommitPage from './components/CommitPage.vue'\nimport Committed from './components/Committed.vue'\nimport Crypts from './components/Crypts.vue'\nimport Crypt from './components/Crypt.vue'\nimport NotFound from './components/NotFound.vue'\n\nif (typeof window !== 'undefined') window.global = window;\n\nconst routes = [\n    { path: '/', name: 'home', component: Homepage, meta: { web3: true } },\n    { path: '/last-rites', name: 'last-rites', component: LastRites },\n    { path: '/urn', name: 'urn', component: URN, meta: { web3: true } },\n    // { path: '/mint', name: 'mint', component: Mint, meta: { web3: true } },\n    { path: '/committal', name: 'commit', component: CommitPage, meta: { web3: true } },\n    { path: '/committed', name: 'committed', component: Committed, meta: { web3: true }, props: route => ({ from: route.query.from, token: route.query.token }) },\n    { path: '/crypts', name: 'crypts', component: Crypts, meta: { web3: true } },\n    { path: '/crypts/:tokenId(\\\\d+)', name: 'crypt', component: Crypt, meta: { web3: true }, props: route => ({ tokenId: route.params.tokenId, token: route.query.token }) },\n    { path: '/:pathMatch(.*)', name: 'not-found', component: NotFound }\n]\n\nconst router = createRouter({\n    history: createWebHashHistory(),\n    routes\n})\n\ncreateApp(App, {\n    provider: (window as any)?.ethereum ? new ethers.providers.Web3Provider((window as any).ethereum) : null,\n    ensDomain: 'graveyardnft.eth',\n    openSea: 'https://opensea.io/collection/graveyard-crypts',\n    looksRare: 'https://looksrare.org/collections/0xda5e043e57d54dbEB0e2BB917cCeB629512c969A',\n    graveyardAddresses: { 1: '0xB96C44c007B2cf979cC30fD6650bEd39823c8BE5', 4: '0x86D1239bfd0Df429Ed6d99Ce3E998E34827F7622' },\n    cryptAddresses: { 1: '0xda5e043e57d54dbEB0e2BB917cCeB629512c969A', 4: '0x39f494b21e48a8d6e4648D916038308FA8489C06' },\n    urnAddresses: { 1: null, 4: '0x2325EA6B9fF882Bb855F92749a8E2B13daE7c409' }\n})\n.use(router)\n.mount('#app')\n"],"names":["ethers.Contract","ethers.providers.Web3Provider","ethers.utils.toUtf8String","ethers.utils.fetchJson","_sfc_main","Menu","Button","ethers.constants.AddressZero","_hoisted_21","_hoisted_28","_createElementBlock","_Fragment","_createCommentVNode","_createVNode","_hoisted_2","_hoisted_4","_hoisted_5","_createBlock","_hoisted_10","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_18","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_30","ethers.utils.formatEther","isAddress","ethers.utils.isAddress","ethers.utils.toUtf8Bytes","debounce","Homepage","URN","CommitPage","Committed","Crypts","Crypt"],"mappings":"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"}